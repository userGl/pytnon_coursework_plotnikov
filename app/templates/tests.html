{% extends "base.html" %}

{% block content %}
<h1>Тестирование</h1>

<div>
    <h2>Запуск тестов</h2>
    <form style="display: flex; gap: 10px;">
        <input type="button" value="Все тесты" onclick="runTest('all')">
        <input type="button" value="Тест endpoints" onclick="runTest('endpoints')">
        <input type="button" value="Тест базы данных" onclick="runTest('repository')">
        <input type="button" value="Тест OCR" onclick="runTest('ocr')">
    </form>
</div>

<div>
    <h2>Результаты тестирования</h2>
    <pre id="testResults" style="white-space: pre-wrap; word-wrap: break-word; background-color: #f5f5f5; padding: 10px;">
Здесь будут отображаться результаты тестов...
    </pre>
</div>

<script>
async function runTest(testType) {
    const resultsElement = document.getElementById('testResults');
    resultsElement.textContent = 'Запуск тестов...';
    
    try {
        const response = await fetch(`/run_test/${testType}`);
        const data = await response.json();
        resultsElement.textContent = data.output || data.error;
    } catch (error) {
        resultsElement.textContent = `Ошибка: ${error.message}`;
    }
}
</script>
{% endblock %} 