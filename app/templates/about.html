{% extends "base.html" %}

{% block content %}
<div class="container">
    <h2>О проекте</h2>
    
    <div class="card mb-4">
        <div class="card-body">
            <h3>Описание</h3>
            <p>Микросервис для распознавания текста с изображений. Поддерживает различные языки и форматы изображений.</p>
            
            <h4>Основные функции:</h4>
            <ul>
                <li>Загрузка изображений в форматах PNG, JPEG, TIFF, BMP</li>
                <li>Распознавание текста с помощью Tesseract OCR</li>
                <li>Поддержка множества языков (русский, английский и др.)</li>
                <li>Сохранение результатов в базе данных SQLite</li>
                <li>Поиск по распознанным текстам</li>
                <li>Отправка результатов на email</li>
                <li>Административная панель с настройками и логами</li>
            </ul>

            <h4>Структура проекта:</h4>
            <ul>
                <li><code>app/</code> - основной код приложения
                    <ul>
                        <li>main.py - FastAPI приложение</li>
                        <li>tesseract.py - работа с OCR</li>
                        <li>templates/ - HTML шаблоны</li>
                    </ul>
                </li>
                <li><code>repository/</code> - работа с базой данных
                    <ul>
                        <li>repository.py - CRUD операции</li>
                        <li>files/ - хранение изображений</li>
                    </ul>
                </li>
                <li><code>notifier/</code> - отправка уведомлений
                    <ul>
                        <li>notification_service.py - работа с SMTP</li>
                    </ul>
                </li>
                <li><code>tests/</code> - модульные тесты</li>
            </ul>
        </div>
    </div>

    <div class="card mb-4">
        <div class="card-body">
            <h3>Основные возможности</h3>
            <ul>
                <li>Распознавание текста (OCR) с изображений</li>
                <li>Поддержка нескольких языков</li>
                <li>Хранение результатов в базе данных</li>
                <li>Поиск по распознанным текстам</li>
                <li>Отправка результатов на email</li>
            </ul>
        </div>
    </div>

    <div class="card mb-4">
        <div class="card-body">
            <h3>API Endpoints</h3>
            
            <h4>1. OCR</h4>
            <ul>
                <li><code>GET /OCR/get_languages/</code> - Получение списка поддерживаемых языков</li>
                <li><code>POST /OCR/upload/</code> - Загрузка и распознавание файла</li>
            </ul>
            <h5>Примеры:</h5>
            <div class="bg-light p-3 mb-3" style="border-radius: 5px;">
                <pre><code># Получение списка языков
curl http://localhost:8000/OCR/get_languages/

# Загрузка и распознавание файла
curl -X POST http://localhost:8000/OCR/upload/ -F "file=@path/to/image.png" -F "lang=rus+eng"</code></pre>
            </div>
            
            <h4>2. Records (Записи)</h4>
            <ul>
                <li><code>GET /records/</code> - HTML страница поиска записей</li>
                <li><code>GET /records/search</code> - API для поиска записей</li>
                <li><code>POST /records/delete</code> - API для удаления записей</li>
            </ul>
            <h5>Примеры:</h5>
            <div class="bg-light p-3 mb-3" style="border-radius: 5px;">
                <pre><code># Получение всех записей
curl http://localhost:8000/records/search

# Поиск по параметрам
curl "http://localhost:8000/records/search?keyword=текст&filename=image&date_from=2024-03-01"

# Удаление записей
curl -X POST http://localhost:8000/records/delete -H "Content-Type: application/json" -d "{\"record_ids\": [1, 2, 3]}"</code></pre>
            </div>
            
            <h4>3. Email</h4>
            <ul>
                <li><code>POST /notifier/send_email/</code> - Отправка текста на email</li>
            </ul>
            <h5>Примеры:</h5>
            <div class="bg-light p-3 mb-3" style="border-radius: 5px;">
                <pre><code># Отправка текста на email
curl -X POST http://localhost:8000/notifier/send_email/ -H "Content-Type: application/json" -d "{\"to_email\": \"user@example.com\", \"text\": \"текст\"}"</code></pre>
            </div>

            <h4>4. Admin</h4>
            <ul>
                <li><code>GET /admin/</code> - Панель администрирования</li>
                <li><code>GET /admin/logs</code> - Получение логов системы</li>
                <li><code>GET /admin/run_test/{test_type}</code> - Запуск тестов</li>
                <li><code>POST /admin/email_config</code> - Настройка SMTP</li>
            </ul>
            <h5>Примеры:</h5>
            <div class="bg-light p-3" style="border-radius: 5px;">
                <pre><code># Получение логов
curl http://localhost:8000/admin/logs?lines=50

# Запуск тестов
curl http://localhost:8000/admin/run_test/all

# Настройка SMTP
curl -X POST http://localhost:8000/admin/email_config -H "Content-Type: application/json" -d "{\"smtp_server\": \"smtp.gmail.com\", \"smtp_port\": 465, \"smtp_user\": \"user@gmail.com\", \"smtp_password\": \"password\", \"from_email\": \"user@gmail.com\"}"</code></pre>
            </div>
        </div>
    </div>

    <div class="card">
        <div class="card-body">
            <h3>Технологии</h3>
            <ul>
                <li>FastAPI - веб-фреймворк</li>
                <li>Tesseract - движок OCR</li>
                <li>SQLite - база данных</li>
                <li>Bootstrap - фронтенд</li>
                <li>Pytest - тестирование</li>
            </ul>
        </div>
    </div>
</div>
{% endblock %} 